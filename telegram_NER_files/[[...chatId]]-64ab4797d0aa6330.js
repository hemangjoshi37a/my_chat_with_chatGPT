(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{49529:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat/[[...chatId]]",function(){return n(1811)}])},1811:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return T},default:function(){return V}});var r=n(61706),i=n(45813),a=n(35250),s=n(91530),o=n.n(s),u=n(61432),c=n(70079),l=n(73925),d=n(62676),f="oai/apps/hasSeenReleaseAnnouncement",h="2022-12-19";function m(e){var t=e.hasSeenOnboardingDate,n=(0,c.useState)(function(){return!Boolean(d.m.getItem("".concat(f,"/").concat(h)))&&!!t&&t<new Date(h)}),r=n[0],i=n[1],s=(0,c.useState)(!1),o=s[0],u=s[1];(0,c.useEffect)(function(){u(!0)},[]);var m=(0,c.useCallback)(function(){d.m.setItem("".concat(f,"/").concat(h),!0),i(!1)},[]);return o?(0,a.jsx)(l.Z,{size:"xs",isOpen:r,onModalClose:m,type:"success",title:"",primaryButton:(0,a.jsx)(l.m,{title:"Sounds good!",color:"primary",onClick:m}),children:(0,a.jsxs)("div",{className:"mb-6 flex flex-col gap-6",children:[(0,a.jsx)("div",{className:"text-gray-800 dark:text-white",children:"Dec 15 version update"}),(0,a.jsx)("div",{className:"text-2xl",children:"Here's what's new"}),(0,a.jsx)("div",{className:"prose text-base dark:prose-invert",children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"We've begun to roll out chat history. You'll soon be able to view and continue your past conversations."}),(0,a.jsx)("li",{children:"Among other improvements, you will notice that ChatGPT is now less likely to refuse to answer questions. We look forward to your feedback."})]})})]})}):null}var p=n(42774),v=n(44513),x=n(14806),g=n(1454),b=n(34303),y=n(12762),j=n(98943),w=n(39690),k=n(18738);function _(){var e=(0,x.Z)(["prose dark:prose-invert"]);return _=function(){return e},e}function I(){var e=(0,y.WS)(),t=(0,u.useRouter)();(0,c.useEffect)(function(){e(j.s6.rateLimitModalLoaded)},[e]);var n=(0,c.useCallback)(function(){e(j.s6.rateLimitModalActionClicked)},[e]),r=(0,k.t)(function(e){return e.setIsUiRateLimitModalVisible}),i=(0,c.useCallback)(function(){r(!1)},[r]);return(0,a.jsxs)(N,{children:[(0,a.jsxs)("div",{className:"relative mb-5",children:[(0,a.jsx)("h3",{className:"!mt-0 !mb-2 font-normal text-gray-700 dark:text-white",children:(0,a.jsx)("b",{children:"You have exceeded your message limit."})}),(0,a.jsx)("h4",{className:"mb-4 font-normal",children:"In order to offer a high-quality experience, we limit the number of messages you can send in an hour."}),(0,a.jsx)("button",{className:"absolute top-0 right-2 rounded-md",onClick:i,type:"button",children:(0,a.jsx)(g.q5L,{className:"h-5 w-5 hover:bg-gray-50"})})]}),(0,a.jsx)("div",{className:"-mx-4 -mb-4 bg-green-700 px-4 pt-5 pb-4 dark:text-white sm:-m-6 sm:-mb-12 sm:mt-6 sm:px-6 sm:pb-8",children:(0,a.jsxs)("div",{className:"flex flex-row gap-2 sm:gap-4",children:[(0,a.jsx)("div",{className:"text-white",children:"You can increase your hourly limit by helping us review your previous messages."}),(0,a.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,a.jsx)(w.z,{as:"button",color:"primary-invert",to:"/rate-limit-task",onClick:function(){t.push("/rate-limit"),n()},children:(0,a.jsx)("span",{className:"whitespace-nowrap",children:"Help review"})})})]})})]})}var N=b.Z.div(_()),C=n(49690),S=n(500),Z=n(31501),L=n(61079),E=n(89874),M=n(23221),P=n(80836),O=n(36613);n(24638);var R=function(){return{thread:(0,P.f1)(),currentLeafId:"root",threadId:null,title:"New chat"}};function D(){return(D=(0,r.Z)(function(e,t,n){var r,a,s;return(0,i.__generator)(this,function(i){switch(i.label){case 0:r=null,i.label=1;case 1:if(i.trys.push([1,4,,5]),!e)return[3,3];return[4,M.ZP.getConversation(e,n,t)];case 2:var o,u,c,l,d;return c=null===(u=Object.values((o=r=i.sent()).mapping).find(function(e){return null===e.parent}))||void 0===u?void 0:u.id,l=new Set,d=new Set,[2,{thread:((o.moderation_results||[]).forEach(function(e){e.blocked?d.add(e.message_id):e.flagged&&l.add(e.message_id)}),a={rootId:c,mapping:Object.keys(o.mapping).reduce(function(e,t){var n,r=o.mapping[t],i=r.parent,a=r.children,s=(0,E.Z)(r,["parent","children"]),u=o.mapping[t].message||(0,P.mH)();return d.has(u.id)?n=O.sK:l.has(u.id)&&(n=O.Mf),e[t]=(0,Z.Z)((0,L.Z)((0,Z.Z)({},s),{message:u,children:a||[],parentId:i||"",type:P.uV[u.role]}),n&&{metadata:n}),e},{}),currentLeafId:o.current_node}).mapping||(0,P.f1)(),currentLeafId:a.currentLeafId||a.rootId||"root",threadId:e,title:r.title||null}];case 3:return[3,5];case 4:return s=i.sent(),console.error(s),[3,5];case 5:return[2,R()]}})})).apply(this,arguments)}function q(){return(q=(0,r.Z)(function(e){return(0,i.__generator)(this,function(t){switch(t.label){case 0:return[4,function(e,t,n){return D.apply(this,arguments)}(e,!1)];case 1:return[2,t.sent()]}})})).apply(this,arguments)}var T=!0;function V(e){var t=e.user,n=e.accessToken,r=e.features,i=e.pages,s=e.initialData,d=(0,c.useState)(!1),f=d[0],h=d[1],x=(0,c.useMemo)(function(){return S.TJ},[]),g=(0,u.useRouter)(),b=g.query.force_crosswalk,w=(0,c.useState)(s),_=w[0],N=w[1],Z=(0,k.t)(function(e){return e.isRateLimitFeatureActive}),L=(0,k.t)(function(e){return e.isRateLimitFailing}),E=(0,k.t)(function(e){return e.setIsRateLimitFailing}),M=(0,k.t)(function(e){return e.setIsUiRateLimitModalVisible});(0,c.useEffect)(function(){Z&&b&&(E(!0),M(!0))},[M,E,Z,b,]);var P=(0,v.PV)(x.id).getHasSeenOnboardingDate,O=(0,c.useMemo)(function(){return{app:j.VY,origin:"chat"}},[]);(0,C.Z)("ChatGPT",t,n,O),(0,c.useEffect)(function(){h(!P())},[P]),(0,c.useEffect)(function(){var e,t=null===(e=g.query.chatId)||void 0===e?void 0:e[0];t!==_.threadId&&(t?(function(e){return q.apply(this,arguments)})(t).then(function(e){return e&&N(e)}):N(R()))},[n,s.threadId,g.query.chatId,null==_?void 0:_.threadId,]);var D=(0,k.t)(function(e){return e.isUiRateLimitModalVisible});return(0,a.jsx)(S.yP.Provider,{value:x,children:(0,a.jsxs)(y.Af.Provider,{value:O,children:[Z&&L&&(0,a.jsx)(l.Z,{size:"medium",isOpen:D,onModalClose:o(),type:"success",children:(0,a.jsx)(I,{})}),(0,a.jsx)(l.Z,{isOpen:f,onModalClose:o(),type:"success",title:"",primaryButton:void 0,children:(0,a.jsx)(v.ZP,{onClose:function(){return h(!1)}})}),(0,a.jsx)(m,{hasSeenOnboardingDate:P()}),(0,a.jsx)(p.Z,{contextName:"proxy",initialData:_,features:new Set(r),pages:i},_.threadId)]})})}}},function(e){e.O(0,[861,741,798,440,424,361,283,221,650,990,774,888,179],function(){return e(e.s=49529)}),_N_E=e.O()}]);
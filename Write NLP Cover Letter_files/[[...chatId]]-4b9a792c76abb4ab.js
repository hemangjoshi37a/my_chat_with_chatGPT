(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{49529:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat/[[...chatId]]",function(){return n(69387)}])},69387:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return L},default:function(){return M}});var r=n(61706),a=n(45813),s=n(35250),i=n(91530),o=n.n(i),c=n(61432),u=n(70079),l=n(73925),d=n(62676),h="oai/apps/hasSeenReleaseAnnouncement",f="2022-12-19";function p(e){var t=e.hasSeenOnboardingDate,n=(0,u.useState)(function(){return!Boolean(d.m.getItem("".concat(h,"/").concat(f)))&&!!t&&t<new Date(f)}),r=n[0],a=n[1],i=(0,u.useState)(!1),o=i[0],c=i[1];(0,u.useEffect)(function(){c(!0)},[]);var p=(0,u.useCallback)(function(){d.m.setItem("".concat(h,"/").concat(f),!0),a(!1)},[]);return o?(0,s.jsx)(l.Z,{size:"xs",isOpen:r,onModalClose:p,type:"success",title:"",primaryButton:(0,s.jsx)(l.m,{title:"Sounds good!",color:"primary",onClick:p}),children:(0,s.jsxs)("div",{className:"mb-6 flex flex-col gap-6",children:[(0,s.jsx)("div",{className:"text-gray-800 dark:text-white",children:"Dec 15 version update"}),(0,s.jsx)("div",{className:"text-2xl",children:"Here's what's new"}),(0,s.jsx)("div",{className:"prose text-base dark:prose-invert",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"We've begun to roll out chat history. You'll soon be able to view and continue your past conversations."}),(0,s.jsx)("li",{children:"Among other improvements, you will notice that ChatGPT is now less likely to refuse to answer questions. We look forward to your feedback."})]})})]})}):null}var m=n(91713),v=n(44513),x=n(14806),g=n(1454),b=n(34303),y=n(12762),j=n(98943),w=n(39690),_=n(72745);function k(){var e=(0,x.Z)(["prose dark:prose-invert"]);return k=function(){return e},e}function N(){var e=(0,y.WS)(),t=(0,c.useRouter)();(0,u.useEffect)(function(){e(j.s6.rateLimitModalLoaded)},[e]);var n=(0,u.useCallback)(function(){e(j.s6.rateLimitModalActionClicked)},[e]),r=(0,_.S)(function(e){return e.setIsUiRateLimitModelVisible}),a=(0,u.useCallback)(function(){r(!1)},[r]);return(0,s.jsxs)(C,{children:[(0,s.jsxs)("div",{className:"relative mb-5",children:[(0,s.jsx)("h3",{className:"!mt-0 !mb-2 font-normal text-gray-700 dark:text-white",children:(0,s.jsx)("b",{children:"You've hit your daily limit"})}),(0,s.jsx)("h4",{className:"mb-4 font-normal",children:"To ensure a high-quality experience for all ChatGPT users, we're temporarily limiting the number of daily messages anyone can send."}),(0,s.jsx)("button",{className:"absolute top-0 right-2 rounded-md",onClick:a,type:"button",children:(0,s.jsx)(g.q5L,{className:"h-5 w-5 hover:bg-gray-50"})})]}),(0,s.jsx)("div",{className:"-mx-4 -mb-4 bg-green-700 px-4 pt-5 pb-4 dark:text-white sm:-m-6 sm:-mb-12 sm:mt-6 sm:px-6 sm:pb-8",children:(0,s.jsxs)("div",{className:"flex flex-row gap-2 sm:gap-4",children:[(0,s.jsxs)("div",{className:"text-white",children:[(0,s.jsx)("b",{children:"Want to keep chatting?"})," Get increased access for today by helping us improve ChatGPT."]}),(0,s.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,s.jsx)(w.z,{as:"button",color:"primary-invert",to:"/rate-limit-task",onClick:function(){t.push("/rate-limit"),n()},children:(0,s.jsx)("span",{className:"whitespace-nowrap",children:"Complete Captcha"})})})]})})]})}var C=b.Z.div(k()),I=n(49690),S=n(500),Z=n(85664);function P(){return(P=(0,r.Z)(function(e){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return[4,(0,Z.cc)(e,!1)];case 1:return[2,t.sent()]}})})).apply(this,arguments)}var L=!0;function M(e){var t=e.user,n=e.accessToken,r=e.paletteFeatures,a=e.features,i=e.pages,d=e.initialData,h=(0,u.useState)(!1),f=h[0],x=h[1],g=(0,u.useMemo)(function(){return S.TJ},[]),b=(0,c.useRouter)(),w=(0,u.useState)(d),k=w[0],C=w[1],L=(0,_.S)(function(e){return e.isRateLimitFeatureActive}),M=(0,_.S)(function(e){return e.isRateLimitFailing}),E=(0,v.PV)(g.id).getHasSeenOnboardingDate,O=(0,u.useMemo)(function(){return{app:j.VY,origin:"chat"}},[]);(0,I.Z)("ChatGPT",t,n,O),(0,u.useEffect)(function(){x(!E())},[E]),(0,u.useEffect)(function(){var e,t=null===(e=b.query.chatId)||void 0===e?void 0:e[0];t!==k.threadId&&(t?(function(e){return P.apply(this,arguments)})(t).then(function(e){return e&&C(e)}):C((0,Z.PH)()))},[n,d.threadId,b.query.chatId,null==k?void 0:k.threadId,]);var T=(0,_.S)(function(e){return e.isUiRateLimitModelVisible});return(0,s.jsx)(S.yP.Provider,{value:g,children:(0,s.jsxs)(y.Af.Provider,{value:O,children:[L&&M&&(0,s.jsx)(l.Z,{size:"medium",isOpen:T,onModalClose:o(),type:"success",children:(0,s.jsx)(N,{})}),(0,s.jsx)(l.Z,{isOpen:f,onModalClose:o(),type:"success",title:"",primaryButton:void 0,children:(0,s.jsx)(v.ZP,{onClose:function(){return x(!1)}})}),(0,s.jsx)(p,{hasSeenOnboardingDate:E()}),(0,s.jsx)(m.Z,{contextName:"proxy",initialData:k,paletteFeatures:r,features:new Set(a),pages:i},k.threadId)]})})}},85664:function(e,t,n){"use strict";n.d(t,{MY:function(){return p},PH:function(){return d},cc:function(){return h}});var r=n(61706),a=n(31501),s=n(61079),i=n(89874),o=n(45813),c=n(23221),u=n(80836),l=n(36613);n(24638);var d=function(){return{thread:(0,u.f1)(),currentLeafId:"root",threadId:null,title:"New chat"}};function h(e,t,n){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(function(e,t,n){var r,h,f;return(0,o.__generator)(this,function(o){switch(o.label){case 0:r=null,o.label=1;case 1:if(o.trys.push([1,4,,5]),!e)return[3,3];return[4,c.ZP.getConversation(e,n,t)];case 2:var p,m,v,x,g;return v=null===(m=Object.values((p=r=o.sent()).mapping).find(function(e){return null===e.parent}))||void 0===m?void 0:m.id,x=new Set,g=new Set,[2,{thread:((p.moderation_results||[]).forEach(function(e){e.blocked?g.add(e.message_id):e.flagged&&x.add(e.message_id)}),h={rootId:v,mapping:Object.keys(p.mapping).reduce(function(e,t){var n,r=p.mapping[t],o=r.parent,c=r.children,d=(0,i.Z)(r,["parent","children"]),h=p.mapping[t].message||(0,u.mH)();return g.has(h.id)?n=l.sK:x.has(h.id)&&(n=l.Mf),e[t]=(0,a.Z)((0,s.Z)((0,a.Z)({},d),{message:h,children:c||[],parentId:o||"",type:u.uV[h.role]}),n&&{metadata:n}),e},{}),currentLeafId:p.current_node}).mapping||(0,u.f1)(),currentLeafId:h.currentLeafId||h.rootId||"root",threadId:e,title:r.title||null}];case 3:return[3,5];case 4:return f=o.sent(),console.error(f),[3,5];case 5:return[2,d()]}})})).apply(this,arguments)}function p(e,t){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(function(e,t){var n,r;return(0,o.__generator)(this,function(a){switch(a.label){case 0:n=null,a.label=1;case 1:if(a.trys.push([1,4,,5]),!e)return[3,3];return[4,c.ZP.getRateLimitCaptchaItem(e,t)];case 2:return[2,n=a.sent()];case 3:return[3,5];case 4:return r=a.sent(),console.error(r),[3,5];case 5:return[2,n]}})})).apply(this,arguments)}}},function(e){e.O(0,[861,741,798,440,424,361,400,221,650,606,774,888,179],function(){return e(e.s=49529)}),_N_E=e.O()}]);
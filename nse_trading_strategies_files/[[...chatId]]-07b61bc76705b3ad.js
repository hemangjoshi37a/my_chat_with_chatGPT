(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{49529:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat/[[...chatId]]",function(){return n(71972)}])},71972:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return E},default:function(){return O}});var a=n(61706),r=n(45813),s=n(35250),i=n(91530),o=n.n(i),u=n(61432),c=n(70079),l=n(73925),d=n(62676),p="oai/apps/hasSeenReleaseAnnouncement",h="2023-01-09";function f(e){var t=e.hasSeenOnboardingDate,n=(0,c.useState)(function(){return!Boolean(d.m.getItem("".concat(p,"/").concat(h)))&&!!t&&t<new Date(h)}),a=n[0],r=n[1],i=(0,c.useState)(!1),o=i[0],u=i[1];(0,c.useEffect)(function(){u(!0)},[]);var f=(0,c.useCallback)(function(){d.m.setItem("".concat(p,"/").concat(h),!0),r(!1)},[]);return o?(0,s.jsx)(l.Z,{size:"xs",isOpen:a,onModalClose:f,type:"success",title:"",primaryButton:(0,s.jsx)(l.m,{title:"Sounds good!",color:"primary",onClick:f}),children:(0,s.jsxs)("div",{className:"mb-6 flex flex-col gap-6",children:[(0,s.jsx)("div",{className:"text-gray-800 dark:text-white",children:"Jan 9 version update"}),(0,s.jsx)("div",{className:"text-2xl",children:"Here's what's new"}),(0,s.jsx)("div",{className:"prose text-base dark:prose-invert",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"We made more improvements to the ChatGPT model! It should be generally better across a wide range of topics and has improved factuality."}),(0,s.jsx)("li",{children:"Stop generating: Based on your feedback, we're rolling out the ability to stop generating ChatGPT's response."})]})})]})}):null}var v=n(25346),m=n(44513),g=n(49690),_=n(66285),x=n(500),y=n(12762),b=n(98943),I=n(31501),P=n(61079),w=n(89874),j=n(60814),S=n(80836),C=n(36613);n(24638);var k=function(){return{thread:S.Cv.createTree(),currentLeafId:"root",threadId:null,title:"New chat"}};function N(){return(N=(0,a.Z)(function(e,t,n){var a,s,i;return(0,r.__generator)(this,function(r){switch(r.label){case 0:a=null,r.label=1;case 1:if(r.trys.push([1,4,,5]),!e)return[3,3];return[4,j.ZP.getConversation(e,n,t)];case 2:var o,u,c,l,d;return c=null===(u=Object.values((o=a=r.sent()).mapping).find(function(e){return null===e.parent}))||void 0===u?void 0:u.id,l=new Set,d=new Set,[2,{thread:((o.moderation_results||[]).forEach(function(e){e.blocked?d.add(e.message_id):e.flagged&&l.add(e.message_id)}),s={rootId:c,mapping:Object.keys(o.mapping).reduce(function(e,t){var n,a=o.mapping[t],r=a.parent,s=a.children,i=(0,w.Z)(a,["parent","children"]),u=o.mapping[t].message||S.Cv.createRootMessage();return d.has(u.id)?n=C.sK:l.has(u.id)&&(n=C.Mf),e[t]=(0,I.Z)((0,P.Z)((0,I.Z)({},i),{message:u,children:s||[],parentId:r||"",type:S.uV[u.role]}),n&&{metadata:n}),e},{}),currentLeafId:o.current_node}).mapping||S.Cv.createTree(),currentLeafId:s.currentLeafId||s.rootId||"root",threadId:e,title:a.title||null}];case 3:return[3,5];case 4:return i=r.sent(),console.error(i),[3,5];case 5:return[2,k()]}})})).apply(this,arguments)}function Z(){return(Z=(0,a.Z)(function(e){return(0,r.__generator)(this,function(t){switch(t.label){case 0:return[4,function(e,t,n){return N.apply(this,arguments)}(e,!1)];case 1:return[2,t.sent()]}})})).apply(this,arguments)}var E=!0;function O(e){var t=e.user,n=e.accessToken,a=e.features,r=e.pages,i=e.initialData,d=e.accountStatusResponse,p=(0,c.useState)(!1),h=p[0],I=p[1],P=(0,c.useMemo)(function(){return x.TJ},[]),w=(0,u.useRouter)(),j=(0,c.useState)(i),S=j[0],C=j[1],N=(0,m.PV)(P.id).getHasSeenOnboardingDate,E=(0,c.useMemo)(function(){return{app:b.VY,origin:"chat"}},[]);(0,g.Z)("ChatGPT",t,n,E);var O=(0,_.mA)(function(e){return{accountPlan:e.accountPlan,updateAccountPlanWithResponse:e.updateAccountPlanWithResponse}}),T=O.accountPlan,R=O.updateAccountPlanWithResponse;return(0,c.useEffect)(function(){var e;T.hasPaidSubscription!==(null===(e=d.account_plan)||void 0===e?void 0:e.is_paid_subscription_active)&&d&&R(d)},[R,d,T]),(0,c.useEffect)(function(){I(!N())},[N]),(0,c.useEffect)(function(){var e,t=null===(e=w.query.chatId)||void 0===e?void 0:e[0];t!==S.threadId&&(t?(function(e){return Z.apply(this,arguments)})(t).then(function(e){return e&&C(e)}):C(k()))},[n,i.threadId,w.query.chatId,null==S?void 0:S.threadId,]),(0,s.jsx)(x.yP.Provider,{value:P,children:(0,s.jsxs)(y.Af.Provider,{value:E,children:[(0,s.jsx)(l.Z,{isOpen:h,onModalClose:o(),type:"success",title:"",primaryButton:void 0,children:(0,s.jsx)(m.ZP,{onClose:function(){return I(!1)}})}),(0,s.jsx)(f,{hasSeenOnboardingDate:N()}),(0,s.jsx)(v.Z,{contextName:"proxy",initialData:S,features:new Set(a),pages:r},S.threadId)]})})}}},function(e){e.O(0,[861,960,741,798,979,424,762,620,686,814,858,818,774,888,179],function(){return e(e.s=49529)}),_N_E=e.O()}]);